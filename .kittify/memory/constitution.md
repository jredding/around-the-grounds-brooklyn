# Around the Grounds Constitution

> Auto-generated by spec-kitty constitution command
> Created: 2026-02-25
> Version: 1.0.0

## Purpose

This constitution captures the technical standards, code quality expectations,
and governance rules for around-the-grounds. All features and pull requests
should align with these principles.

## Technical Standards

### Languages and Frameworks

- **Language**: Python 3.8+
- **Async pattern**: async/await throughout — all I/O must be async
- **HTTP**: aiohttp for async scraping; requests for legacy/one-off use only
- **HTML parsing**: beautifulsoup4 with lxml backend
- **AI features**: anthropic SDK (Claude Vision API, Claude Sonnet)
- **Workflows**: temporalio (Temporal Cloud for scheduled production runs)
- **Dependency management**: uv (`uv sync --dev` to install, `uv run` to execute)
- **Type checking**: mypy with `disallow_untyped_defs = true` — all code must be fully typed
- **Formatting**: Black (88-char line length), isort (Black profile)

### Testing Requirements

- **Framework**: pytest with pytest-asyncio, pytest-mock, aioresponses, freezegun, pytest-cov
- **Scope**: All new code requires unit tests and error scenario tests (network failures, invalid data, timeouts)
- **No deletions**: Tests are never deleted — only added or updated
- **Parser tests**: Every parser must have a corresponding test file in `tests/parsers/`
- **Error handling**: Every error path must have a test; graceful degradation is required

### Performance and Scale

N/A — performance is not a primary concern. CLI operations are expected to take
60–90 seconds for a full scrape run. AI features (vision, haiku) add additional time.

### Deployment and Constraints

- **Target environment**: macOS (development), Linux (CI/cloud)
- **Web output**: Static site generated to a target git repository, auto-deployed via Vercel
- **Authentication**: GitHub App credentials for automated git push (no personal tokens in code)
- **Scheduling**: Temporal Cloud for production workflow scheduling
- **Secrets**: All API keys and credentials via environment variables only (`ANTHROPIC_API_KEY`, GitHub App env vars)
- **Config**: JSON config files own deployment targets — no hardcoded repository URLs in source code

## Development Philosophy

### Minimal Changes

Every change must be the smallest possible diff that satisfies the requirement.
Do not refactor surrounding code, rename things not directly involved, add
abstractions for hypothetical future use, or clean up unrelated areas. If a
bug fix is three lines, the PR is three lines.

- **No opportunistic refactoring** — fix what the spec asks, nothing else
- **No speculative abstractions** — build for the current requirement, not imagined futures
- **No collateral cleanup** — leave unrelated code exactly as found
- When in doubt, do less and document the decision

### Upstream-First Contributions

This codebase is an upstream package. All changes are made with the intent of
contributing them back to the canonical around-the-grounds repository as clean,
reviewable PRs. Every feature branch should be proposable upstream without
modification.

- **No downstream-only hacks** — if a change is needed, it belongs in the upstream source
- **No ventr-specific dependencies** — changes must be self-contained and project-agnostic
- **PR-ready at all times** — branches should be mergeable to `main` with a clean history
- **Enhance, don't fork** — the goal is always to improve the upstream library so all
  consumers benefit, never to maintain a private divergent copy

## Governance

### Amendment Process

Any contributor can propose amendments via pull request. Changes are discussed
and merged following standard PR review process.

### Compliance Validation

Code reviewers validate compliance during PR review. Constitution violations
should be flagged and addressed before merge.

### Exception Handling

Exceptions discussed case-by-case. Strong justification required.
Consider updating the constitution if exceptions become common.
